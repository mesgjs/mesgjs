import{getInterface as p,runIfCode as o,msjsInstance as j,setRO as c}from"./runtime.esm.js";import{reactive as n}from"./vendor.esm.js";let f;function i(e){switch(e?.msjsType){case"@code":return()=>e("run");case"@function":return e("jsfn");case f:return e("@jsv").getter}}function m(e){switch(e?.msjsType){case"@code":return e("fn")("jsfn");case"@function":return e("jsfn");default:return e}}function v(e){const{mp:t}=e,s=t.at(0);if(s?.$reactive===n.type)c(e.octx,"js",s);else{const r=t.at("cmp"),a=t.at("def");typeof r=="function"&&t.set("cmp",m(r)),typeof a=="function"&&t.set("def",i(a)),!t.has("v")&&t.has(0)&&t.set("v",t.at(0)),c(e.octx,"js",n(t?.storage||{}))}c(e.js,j,e.rr,!1)}function h(e){return n.batch(()=>o(e.mp.at(0)))}function d(e){const{js:t,mp:s}=e;for(const r of s.entries())switch(r[0]){case"def":typeof r[1]=="function"&&(t.def=i(r[1]));break;case"eager":case"eager1":case"eager2":t.eager=r[1];break;case"v":case"0":t.wv=r[1];break}return t}function g(e){return n.untracked(()=>o(e.mp.at(0)))}function u(e){return e||(e=n()),{batch:n.batch,changed:()=>e.ripple(),create:u,depend:()=>e.rv}}function y(e){f=e,p(e).set({lock:!0,pristine:!0,handlers:{"@init":v,"@jsv":t=>t.js,batch:h,def:t=>t.js.def,eager:t=>t.js.eager,error:t=>t.js.error,fv:t=>n.fv(t.js),rio:t=>u(t.js),rv:t=>t.js.rv,set:d,untr:g}})}export{y as install};
