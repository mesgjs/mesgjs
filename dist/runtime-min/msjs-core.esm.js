import{debugConfig as j,fcheck as l,fready as u,fwait as m,getInstance as f,getInterface as i,getModMeta as x,logInterfaces as E,modHasCap as g,runIfCode as r,runWhileCode as d,setModMeta as M,setRO as v,typeAccepts as c,typeChains as h}from"./runtime.esm.js";import{NANOS as O,parseQJSON as T,parseSLID as A}from"./vendor.esm.js";function y(n){const{mp:t}=n;let e=!0;for(const o of t.values())if(e=r(o),!e)return e;return e}function w(n){const{mp:t}=n,e=t.at(0),o=e?.msjsType,p=t.next-1,s=c(o,"caseEq")?"caseEq":c(o,"eq")?"eq":void 0,b=s?a=>e(s,a):a=>e===a;for(let a=1;a<p;a+=2)if(b(r(t.at(a))))return r(t.at(a+1));return r(t.at("else"))}function C(n){const{mp:t}=n;return f(t.at(0),t.at("init"))}function q(n){const{mp:t}=n,e=t.next-1;for(let o=0;o<e;o+=2)if(r(t.at(o)))return r(t.at(o+1));if(t.has("else"))return r(t.at("else"));if(t.next%2)return r(t.at(e))}function I(n){const{mp:t}=n;let e=!1;for(const o of t.values())if(e=r(o),e)return e;return e}function k(n){const{mp:t}=n,e=t.at("collect");let o=e?new O:void 0;const p=s=>{e?o.push(s):o=s};if(t.at("repeat"))for(const s of t.values())p(d(s));else for(const s of t.values())p(r(s));return o}function H(n){const{mp:t}=n,e=t.at(0);throw e instanceof Error?e:new Error(e)}function N(n){const{mp:t}=n;let e=!1;for(const o of t.values()){const p=r(o);if(p){if(e)return!1;e=p}}return e}function $(n){i(n).set({final:!0,lock:!0,pristine:!0,singleton:!0,handlers:{_:t=>t.mp.at(0),"&":y,":":w,"+":C,"?":q,"~":t=>!r(t.mp.at(0)),"|":I,and:y,case:w,debug:t=>j(t.mp),fcheck:t=>l(t.mp.at(0)),fwait:t=>m(...t.mp.values()),fready:t=>u(t.mp.at("mid"),t.mp.at(0)),get:C,if:q,interface:t=>i(t.mp.at(0)),log:t=>console.log(...t.mp.values()),logErr:t=>console.error(...t.mp.values()),logInterfaces:E,logWarn:t=>console.warn(...t.mp.values()),modHasCap:t=>g(t.mp.at(0),t.mp.at(1)),not:t=>!r(t.mp.at(0)),or:I,qjson:t=>T(t.mp.at(0,"")),run:k,slid:t=>A(t.mp.at(0,"")),throw:H,type:t=>globalThis.$toMsjs(t.mp.at(0))?.msjsType,typeAccepts:t=>c(t.mp.at(0),t.mp.at(1)),typeChains:t=>h(t.mp.at(0),t.mp.at(1)),xor:N},cacheHints:{":":"pin","+":"pin","?":"pin",case:"pin",get:"pin",if:"pin"}}),n==="@core"&&(v(globalThis,"$c",f("@core")),Object.assign($c,{fcheck:l,fready:u,fwait:m,getInstance:f,getInterface:i,getModMeta:x,modHasCap:g,runIfCode:r,runWhileCode:d,setModMeta:M,setRO:v,typeAccepts:c,typeChains:h}))}export{$ as install};
