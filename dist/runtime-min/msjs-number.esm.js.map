{
  "version": 3,
  "sources": ["../../src/runtime/msjs-number.esm.js"],
  "sourcesContent": ["/*\n * Mesgjs @number interface\n * Author: Brian Katzung <briank@kappacs.com>\n * Copyright 2025 by Kappa Computer Solutions, LLC and Brian Katzung\n */\n\nimport { getInterface, setRO, typeAccepts } from './runtime.esm.js';\n\nfunction perform (d, opf, def = 0) {\n    const mp = d.mp; let js = d.js;\n    for (const v of mp.values()) js = opf(js, toNum(v, def));\n    return js;\n}\n\nfunction toNum (v, def) {\n    const st = v?.msjsType;\n    if (st && typeAccepts(st, 'toNumber')) v = v('toNumber');\n    const t = typeof v;\n    if (t === 'number' || t === 'bigint') return v;\n    return def;\n}\n\nfunction opAdd (d) {\n    const mp = d.mp; let js = d.js;\n    for (const v of mp.values()) js += toNum(v, 0);\n    return js;\n}\n\nfunction opAtInit (d) {\n    const { octx, mp } = d, num = mp.at(0), type = typeof num;\n    setRO(octx, 'js', (type === 'number' || type === 'bigint') ? num : parseFloat(num));\n}\n\nfunction opHypot (d) {\n    const { js, mp } = d;\n    if (mp.has('of')) return Math.hypot(...mp.at('of').values());\n    return Math.hypot(js, ...mp.values());\n}\n\n// Is number in the interval defined by the ge, gt, le, lt keys?\nfunction opIval (d) {\n    const { js, mp } = d;\n    return (((mp.has('ge') && js < mp.at('ge')) ||\n      (mp.has('gt') && js <= mp.at('gt')) ||\n      (mp.has('le') && js > mp.at('le')) ||\n      (mp.has('lt') && js >= mp.at('lt'))) ? false : true);\n}\n\n// (log) (default base=10) or (log base) or (log base=base)\nfunction opLog (d) {\n    const { js, mp } = d;\n    if (mp.has('base')) return Math.log(js) / Math.log(mp.at('base'));\n    if (mp.has(0)) return Math.log(js) / Math.log(mp.at(0));\n    return Math.log10(js);\n}\n\nfunction opMax (d) {\n    const { js, mp } = d;\n    if (mp.has('of')) return Math.max(...mp.at('of').values());\n    return Math.max(js, ...mp.values());\n}\n\nfunction opMin (d) {\n    const { js, mp } = d;\n    if (mp.has('of')) return Math.min(...mp.at('of').values());\n    return Math.min(js, ...mp.values());\n}\n\nfunction opMod (d) {\n    const mp = d.mp; let js = d.js;\n    for (const v of mp.values()) js %= toNum(v, NaN);\n    return js;\n}\n\nfunction opMul (d) {\n    const mp = d.mp; let js = d.js;\n    for (const v of mp.values()) js *= toNum(v, 1);\n    return js;\n}\n\nfunction opSub (d) {\n    const mp = d.mp; let js = d.js;\n    for (const v of mp.values()) js -= toNum(v, 0);\n    return js;\n}\n\nexport function install () {\n    getInterface('@number').set({\n\tlock: true, pristine: true,\n\thandlers: {\n\t    '@init': opAtInit,\n\t    '@jsv': d => d.js,\n\t    abs: d => Math.abs(d.js),\n\t    acos: d => Math.acos(d.js),\n\t    acosh: d => Math.acosh(d.js),\n\t    add: opAdd,\n\t    and: d => perform(d, (a, b) => a & b, -1),\n\t    asin: d => Math.asin(d.js),\n\t    asinh: d => Math.asinh(d.js),\n\t    atan: d => Math.atan(d.js),\n\t    atanh: d => Math.atanh(d.js),\n\t    atanxy: d => Math.atan2(toNum(d.mp.at('y', 0)), toNum(d.mp.at('x', 0))),\n\t    cbrt: d => Math.cbrt(d.js),\t\t// Cube root\n\t    ceil: d => Math.ceil(d.js),\n\t    cmpl: d => ~d.js,\t\t\t// Complement\n\t    cos: d => Math.cos(d.js),\n\t    cosh: d => Math.cosh(d.js),\n\t    div: d => perform(d, (a, b) => a / b, 1),\n\t    e: d => d.js * Math.E,\n\t    eq: d => d.js === toNum(d.mp.at(0)),\n\t    exp: d => Math.exp(d.js),\t\t// e^base\n\t    expm1: d => Math.expm1(d.js),\t// e^(base - 1)\n\t    floor: d => Math.floor(d.js),\n\t    ge: d => d.js >= toNum(d.mp.at(0)),\n\t    golden: d => 1.618033988749895 * d.js,// golden ratio (phi)\n\t    gt: d => d.js > toNum(d.mp.at(0)),\n\t    hypot: opHypot,\n\t    int: d => Math.trunc(d.js),\n\t    isNan: d => d.js !== d.js,\n\t    isNegInf: d => d.js === -Infinity,\n\t    isNegZero: d => d.js === 0 && (1 / d.js) === -Infinity,\n\t    isPosInf: d => d.js === Infinity,\n\t    isPosZero: d => d.js === 0 && (1 / d.js) === Infinity,\n\t    ival: opIval,\n\t    le: d => d.js <= toNum(d.mp.at(0)),\n\t    ln: d => Math.log(d.js),\t\t// Natural log\n\t    ln10: d => Math.LN10 * d.js,\n\t    ln1p: d => Math.log1p(d.js),\n\t    ln2: d => Math.LN2 * d.js,\n\t    log: opLog,\t\t\t\t// Log base 10 (or specific)\n\t    log10e: d => Math.LOG10E * d.js,\n\t    log2: d => Math.log2(d.js),\n\t    log2e: d => Math.LOG2E * d.js,\n\t    lshf: d => d.js << toNum(d.mp.at(0)),\n\t    lt: d => d.js < toNum(d.mp.at(0)),\n\t    max: opMax,\n\t    min: opMin,\n\t    mod: opMod,\n\t    mul: opMul,\n\t    ne: d => d.js !== toNum(d.mp.at(0)),\n\t    neg: d => -d.js,\n\t    or: d => perform(d, (a, b) => a | b),\n\t    pi: d => Math.PI * d.js,\n\t    pow: d => perform(d, (a, b) => a ** b, 1),\n\t    random: d => Math.random() * d.js,\n\t    rshf: d => d.js >> toNum(d.mp.at(0)),\n\t    round: d => Math.round(d.js),\n\t    sign: d => Math.sign(d.js),\n\t    sin: d => Math.sin(d.js),\n\t    sinh: d => Math.sinh(d.js),\n\t    sqrt: d => Math.sqrt(d.js),\n\t    sqrt2: d => Math.SQRT2 * d.js,\n\t    sub: opSub,\n\t    tan: d => Math.tan(d.js),\n\t    tanh: d => Math.tanh(d.js),\n\t    toNumber: d => d.js,\n\t    toString: d => d.js.toString(d.mp.at(0)),\n\t    valueOf: d => d.js,\n\t    xor: d => perform(d, (a, b) => a ^ b),\n\t    zfrs: d => d.js >>> toNum(d.mp.at(0)),\n\t},\n\tcacheHints: {\n\t    '@init': 'pin',\n\t},\n    });\n}\n\n// END\n"],
  "mappings": "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",
  "names": ["getInterface", "setRO", "typeAccepts", "perform", "d", "opf", "def", "mp", "js", "v", "toNum", "st", "t", "opAdd", "opAtInit", "octx", "num", "type", "opHypot", "opIval", "opLog", "opMax", "opMin", "opMod", "opMul", "opSub", "install", "b"]
}
