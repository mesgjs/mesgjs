{
  "version": 3,
  "sources": ["../../src/runtime/js-number.esm.js"],
  "sourcesContent": ["/*\n * Mesgjs @number interface - JS number / bigint wrapper\n * Author: Brian Katzung <briank@kappacs.com>\n * Copyright 2025 by Kappa Computer Solutions, LLC and Brian Katzung\n */\n\nimport { getInterface, setRO, typeAccepts } from './runtime.esm.js';\n\nfunction perform (d, opf, def = 0) {\n\tconst mp = d.mp; let js = d.js;\n\tfor (const v of mp.values()) js = opf(js, toNum(v, def));\n\treturn js;\n}\n\nfunction toNum (v, def) {\n\tconst st = v?.msjsType;\n\tif (st && typeAccepts(st, 'toNumber')) v = v('toNumber');\n\tconst t = typeof v;\n\tif (t === 'number' || t === 'bigint') return v;\n\treturn def;\n}\n\nfunction opAdd (d) {\n\tconst mp = d.mp; let js = d.js;\n\tfor (const v of mp.values()) js += toNum(v, 0);\n\treturn js;\n}\n\nfunction opInit (d) {\n\tconst { octx, mp } = d, num = mp.at(0), type = typeof num;\n\tsetRO(octx, 'js', (type === 'number' || type === 'bigint') ? num : parseFloat(num));\n\tsetRO(d.rr, { jsv: d.js, valueOf: () => d.js });\n}\n\nfunction opHypot (d) {\n\tconst { js, mp } = d;\n\tif (mp.has('of')) return Math.hypot(...mp.at('of').values());\n\treturn Math.hypot(js, ...mp.values());\n}\n\n// Is number in the interval defined by the ge, gt, le, lt keys?\nfunction opIval (d) {\n\tconst { js, mp } = d;\n\treturn (((mp.has('ge') && js < mp.at('ge')) ||\n\t  (mp.has('gt') && js <= mp.at('gt')) ||\n\t  (mp.has('le') && js > mp.at('le')) ||\n\t  (mp.has('lt') && js >= mp.at('lt'))) ? false : true);\n}\n\n// (log) (default base=10) or (log base) or (log base=base)\nfunction opLog (d) {\n\tconst { js, mp } = d;\n\tif (mp.has('base')) return Math.log(js) / Math.log(mp.at('base'));\n\tif (mp.has(0)) return Math.log(js) / Math.log(mp.at(0));\n\treturn Math.log10(js);\n}\n\nfunction opMax (d) {\n\tconst { js, mp } = d;\n\tif (mp.has('of')) return Math.max(...mp.at('of').values());\n\treturn Math.max(js, ...mp.values());\n}\n\nfunction opMin (d) {\n\tconst { js, mp } = d;\n\tif (mp.has('of')) return Math.min(...mp.at('of').values());\n\treturn Math.min(js, ...mp.values());\n}\n\nfunction opMul (d) {\n\tconst mp = d.mp; let js = d.js;\n\tfor (const v of mp.values()) js *= toNum(v, 1);\n\treturn js;\n}\n\nfunction opSub (d) {\n\tconst mp = d.mp; let js = d.js;\n\tfor (const v of mp.values()) js -= toNum(v, 0);\n\treturn js;\n}\n\nexport function install () {\n\tgetInterface('@number').set({\n\t\tlock: true, pristine: true,\n\t\thandlers: {\n\t\t\t'@init': opInit,\n\t\t\t'@jsv': d => d.js,\n\t\t\t'+': opAdd,\n\t\t\t'&': d => perform(d, (a, b) => a & b, -1), // and\n\t\t\t'/': d => perform(d, (a, b) => a / b, 1), // div\n\t\t\t'=': d => d.js === toNum(d.mp.at(0)), // eq\n\t\t\t'>=': d => d.js >= toNum(d.mp.at(0)), // ge\n\t\t\t'>': d => d.js > toNum(d.mp.at(0)), // gt\n\t\t\t'<=': d => d.js <= toNum(d.mp.at(0)), // le\n\t\t\t'<<': d => d.js << toNum(d.mp.at(0)), // lshf\n\t\t\t'<': d => d.js < toNum(d.mp.at(0)), // lt\n\t\t\t'/+': d => perform(d, (a, b) => a % b, NaN), // mod\n\t\t\t'*': opMul,\n\t\t\t'!=': d => d.js !== toNum(d.mp.at(0)), // ne\n\t\t\t'+-': d => -d.js, // neg\n\t\t\t'|': d => perform(d, (a, b) => a | b), // or\n\t\t\t'**': d => perform(d, (a, b) => a ** b, 1), // pow\n\t\t\t'>>': d => d.js >> toNum(d.mp.at(0)), // rshf\n\t\t\t'-': opSub,\n\t\t\t'^': d => perform(d, (a, b) => a ^ b), // xor\n\t\t\t'>>>': d => d.js >>> toNum(d.mp.at(0)), // zfrs\n\t\t\tabs: d => Math.abs(d.js),\n\t\t\tacos: d => Math.acos(d.js),\n\t\t\tacosh: d => Math.acosh(d.js),\n\t\t\tadd: opAdd,\n\t\t\tand: d => perform(d, (a, b) => a & b, -1),\n\t\t\tasin: d => Math.asin(d.js),\n\t\t\tasinh: d => Math.asinh(d.js),\n\t\t\tatan: d => Math.atan(d.js),\n\t\t\tatanh: d => Math.atanh(d.js),\n\t\t\tatanxy: d => Math.atan2(toNum(d.mp.at('y', 0)), toNum(d.mp.at('x', 0))),\n\t\t\tcbrt: d => Math.cbrt(d.js),\t\t\t// Cube root\n\t\t\tceil: d => Math.ceil(d.js),\n\t\t\tcmpl: d => ~d.js,\t\t\t\t\t// Complement\n\t\t\tcos: d => Math.cos(d.js),\n\t\t\tcosh: d => Math.cosh(d.js),\n\t\t\tdiv: d => perform(d, (a, b) => a / b, 1),\n\t\t\te: d => d.js * Math.E,\n\t\t\teq: d => d.js === toNum(d.mp.at(0)),\n\t\t\texp: d => Math.exp(d.js),\t\t\t// e^base\n\t\t\texpm1: d => Math.expm1(d.js),\t\t// e^(base - 1)\n\t\t\tfloor: d => Math.floor(d.js),\n\t\t\tge: d => d.js >= toNum(d.mp.at(0)),\n\t\t\tgolden: d => 1.618033988749895 * d.js,// golden ratio (phi)\n\t\t\tgt: d => d.js > toNum(d.mp.at(0)),\n\t\t\thypot: opHypot,\n\t\t\tint: d => Math.trunc(d.js),\n\t\t\tisNan: d => d.js !== d.js,\n\t\t\tisNegInf: d => d.js === -Infinity,\n\t\t\tisNegZero: d => d.js === 0 && (1 / d.js) === -Infinity,\n\t\t\tisPosInf: d => d.js === Infinity,\n\t\t\tisPosZero: d => d.js === 0 && (1 / d.js) === Infinity,\n\t\t\tival: opIval,\n\t\t\tle: d => d.js <= toNum(d.mp.at(0)),\n\t\t\tln: d => Math.log(d.js),\t\t\t// Natural log\n\t\t\tln10: d => Math.LN10 * d.js,\n\t\t\tln1p: d => Math.log1p(d.js),\n\t\t\tln2: d => Math.LN2 * d.js,\n\t\t\tlog: opLog,\t\t\t\t\t\t\t// Log base 10 (or specific)\n\t\t\tlog10e: d => Math.LOG10E * d.js,\n\t\t\tlog2: d => Math.log2(d.js),\n\t\t\tlog2e: d => Math.LOG2E * d.js,\n\t\t\tlshf: d => d.js << toNum(d.mp.at(0)),\n\t\t\tlt: d => d.js < toNum(d.mp.at(0)),\n\t\t\tmax: opMax,\n\t\t\tmin: opMin,\n\t\t\tmod: d => perform(d, (a, b) => a % b, NaN),\n\t\t\tmul: opMul,\n\t\t\tne: d => d.js !== toNum(d.mp.at(0)),\n\t\t\tneg: d => -d.js,\n\t\t\tor: d => perform(d, (a, b) => a | b),\n\t\t\tpi: d => Math.PI * d.js,\n\t\t\tpow: d => perform(d, (a, b) => a ** b, 1),\n\t\t\trandom: d => Math.random() * d.js,\n\t\t\trshf: d => d.js >> toNum(d.mp.at(0)),\n\t\t\tround: d => Math.round(d.js),\n\t\t\tsign: d => Math.sign(d.js),\n\t\t\tsin: d => Math.sin(d.js),\n\t\t\tsinh: d => Math.sinh(d.js),\n\t\t\tsqrt: d => Math.sqrt(d.js),\n\t\t\tsqrt2: d => Math.SQRT2 * d.js,\n\t\t\tsub: opSub,\n\t\t\ttan: d => Math.tan(d.js),\n\t\t\ttanh: d => Math.tanh(d.js),\n\t\t\ttoNumber: d => d.js,\n\t\t\ttoString: d => d.js.toString(d.mp.at(0)),\n\t\t\tvalueOf: d => d.js,\n\t\t\txor: d => perform(d, (a, b) => a ^ b),\n\t\t\tzfrs: d => d.js >>> toNum(d.mp.at(0)),\n\t\t},\n\t\tcacheHints: {\n\t\t\t'@init': 'pin',\n\t\t\t'+': 'pin',\n\t\t\t'-': 'pin',\n\t\t\tadd: 'pin',\n\t\t\tsub: 'pin',\n\t\t},\n\t});\n}\n\n// END\n"],
  "mappings": "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",
  "names": ["getInterface", "setRO", "typeAccepts", "perform", "d", "opf", "def", "mp", "js", "v", "toNum", "st", "t", "opAdd", "opInit", "octx", "num", "type", "opHypot", "opIval", "opLog", "opMax", "opMin", "opMul", "opSub", "install", "b"]
}
