import{getInterface as i,setRO as a}from"./runtime.esm.js";import{unifiedList as p,uniAt as j}from"./unified-list.esm.js";import{NANOS as u}from"./vendor.esm.js";function l(t){const{octx:e,mp:s}=t,r=s.at(0);a(e,"js",r instanceof Map?r:new Map),a(t.js,$c.symbols.instance,t.rr,!1),a(t.rr,{jsv:t.js,valueOf:()=>t.js})}function n(t){const{mp:e}=t,s=e.has("path")?p(e.at("path")).values():e.values();return j(t.js,[...s],{wrap:!0,defaultFn:()=>{if(e.has("else"))return runIfCode(e.at("else"));throw new Error("Key path not found")}})}function o(t){return t.js.set(t.mp.at(0),t.mp.at("to",t.mp.at(1))),t.js}function h(t){i(t).set({lock:!0,pristine:!0,handlers:{"@init":l,"@jsv":e=>e.js,"@":n,"=":o,at:n,clear:e=>(e.js.clear(),e.js),delete:e=>e.js.delete(e.mp.at(0)),entries:e=>[...e.js.entries()],get:n,has:e=>e.js.has(e.mp.at(0)),keyIter:e=>e.js.keys(),keys:e=>[...e.js.keys()],set:o,size:e=>e.js.size,toList:e=>new u(e.js),values:e=>[...e.js.values()]}})}export{h as install};
