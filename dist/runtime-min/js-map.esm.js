import{getInterface as i,setRO as r}from"./runtime.esm.js";import{unifiedList as p,uniAt as u}from"./unified-list.esm.js";import{NANOS as j}from"./vendor.esm.js";function l(e){const{octx:t,mp:s}=e,n=s.at(0);r(t,"js",n instanceof Map?n:new Map),r(e.rr,{jsv:e.js,valueOf:()=>e.js})}function a(e){const{mp:t}=e,s=t.has("path")?p(t.at("path")).values():t.values();return u(e.js,[...s],{wrap:!0,defaultFn:()=>{if(t.has("else"))return runIfCode(t.at("else"));throw new Error("Key path not found")}})}function o(e){return e.js.set(e.mp.at(0),e.mp.at("to",e.mp.at(1))),e.js}function h(e){i(e).set({lock:!0,pristine:!0,handlers:{"@init":l,"@jsv":t=>t.js,"@":a,"=":o,at:a,clear:t=>(t.js.clear(),t.js),delete:t=>t.js.delete(t.mp.at(0)),entries:t=>[...t.js.entries()],get:a,has:t=>t.js.has(t.mp.at(0)),keyIter:t=>t.js.keys(),keys:t=>[...t.js.keys()],set:o,size:t=>t.js.size,toList:t=>new j(t.js),values:t=>[...t.js.values()]}})}export{h as install};
